{"remainingRequest":"F:\\mp-project\\taigongthtm-project-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\mp-project\\taigongthtm-project-front\\src\\views\\Home\\but.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\mp-project\\taigongthtm-project-front\\src\\views\\Home\\but.vue","mtime":1641542425992},{"path":"F:\\mp-project\\taigongthtm-project-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453574266},{"path":"F:\\mp-project\\taigongthtm-project-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1648453572806},{"path":"F:\\mp-project\\taigongthtm-project-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453574266},{"path":"F:\\mp-project\\taigongthtm-project-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1648453593268}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgWExTWCBmcm9tICIuLi8uLi8uLi9ub2RlX21vZHVsZXMveGxzeCINCmltcG9ydCB7ZXhwb3J0RGVmYXVsdFRlbXBsYXRlLHBpbGlhbmdqaXN1YW59IGZyb20gIi4uLy4uL3JlcXVlc3QvYXBpIg0KZXhwb3J0IGRlZmF1bHQgew0KZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVUaGVhZDogWw0KICAgICAgICB7DQogICAgICAgICAgcHJvcHM6ICJyNyIsDQogICAgICAgICAgbGFiZWw6ICJSNyIsDQogICAgICAgICAgd2lkdGg6ICIxODAiLA0KICAgICAgICB9LA0KICAgICAgDQogICAgICBdLA0KICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIsDQogICAgICBuYW1lOiAi5qih5p2/LeegvOaKl+WOi+W8uuW6puaOqOeul+WIhuaekOi9r+S7ti54bHN4IiwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZG93bmxvYWRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIGZvcm1UOiB7fSwNCiAgICAgIGVycm9ySW5kZXhBcnI6IFtdLA0KICAgICAgZXJyb3JJbmRleE1zZ09iajoge30sDQp9DQp9LA0KbWV0aG9kczp7DQogIGFzeW5jIHVwbG9hZEZpbGUocGFyYW1zKSB7DQogICAgICBjb25zb2xlLmxvZyhwYXJhbXMpOw0KICAgICAgY29uc3QgX2ZpbGUgPSBwYXJhbXMuZmlsZTsNCiAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSAoZXYpID0+IHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCBkYXRhID0gZXYudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7DQogICAgICAgICAgICB0eXBlOiAiYmluYXJ5IiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBmb3IgKGxldCBzaGVldCBpbiB3b3JrYm9vay5TaGVldHMpIHsNCiAgICAgICAgICAgIC8v5b6q546v6K+75Y+W5q+P5Liq5paH5Lu2DQogICAgICAgICAgICBjb25zdCBzaGVldEFycmF5ID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1tzaGVldF0pOw0KICAgICAgICAgICAgLy/oi6XlvZPliY1zaGVldOayoeacieaVsOaNru+8jOWImWNvbnRpbnVlDQogICAgICAgICAgICBpZiAoc2hlZXRBcnJheS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLor7vlj5bmlofku7YiKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoZWV0QXJyYXkpOw0KICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiBzaGVldEFycmF5KSB7DQogICAgICAgICAgICAgIGxldCByb3dUYWJsZSA9IHt9Ow0KICAgICAgICAgICAgICAvL+i/memHjOeahHJvd1RhYmxl55qE5bGe5oCn5ZCN5rOo5oSP6KaB5LiO5LiK6Z2i6KGo5qC855qEcHJvcOS4gOiHtA0KICAgICAgICAgICAgICAvL3NoZWV0QXJyYXnnmoTlsZ7mgKflkI3kuI7kuIrkvKDnmoTooajmoLznmoTliJflkI3kuIDoh7QNCiAgICAgICAgICAgICAgcm93VGFibGUucjcgPSBzaGVldEFycmF5W2l0ZW1dLlI3Ow0KICAgICAgICAgICAgICB0aGlzLmxpc3QucHVzaChyb3dUYWJsZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLmlofku7bnsbvlnovkuI3mraPnoa7vvIEiKTsNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICAgIGZpbGVSZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKF9maWxlKTsNCiAgICB9LA0KICAgIGRhb3J1RXJyb3JGdW4obXNnQXJyKSB7DQogICAgICBsZXQgZXJyb3JJbmRleEFyciA9IFtdOw0KICAgICAgbGV0IGVycm9ySW5kZXhNc2dPYmogPSB7fTsNCiAgICAgIG1zZ0Fyci5mb3JFYWNoKCh2KSA9PiB7DQogICAgICAgIGxldCBhcnIgPSB2LnNwbGl0KCIjQCIpIHx8IFtdOw0KICAgICAgICBsZXQgaW5kZXggPSBwYXJzZUZsb2F0KGFyclswXSk7DQogICAgICAgIGVycm9ySW5kZXhBcnIucHVzaChpbmRleCk7DQogICAgICAgIGxldCB2YWx1ZSA9IGFyclsxXSB8fCAiIjsNCiAgICAgICAgbGV0IGFycjEgPSB2YWx1ZS5zcGxpdCgiQCIpOw0KICAgICAgICBlcnJvckluZGV4TXNnT2JqW2luZGV4XSA9IHt9Ow0KICAgICAgICBhcnIxLmZvckVhY2goKHYxKSA9PiB7DQogICAgICAgICAgbGV0IGFycjIgPSB2MS5zcGxpdCgiOiIpOw0KICAgICAgICAgIGVycm9ySW5kZXhNc2dPYmpbaW5kZXhdW2FycjJbMF1dID0gYXJyMlsxXTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIHRoaXMuZXJyb3JJbmRleEFyciA9IGVycm9ySW5kZXhBcnI7DQogICAgICB0aGlzLmVycm9ySW5kZXhNc2dPYmogPSBlcnJvckluZGV4TXNnT2JqOw0KICAgIH0sDQogICAgdGFibGVSb3dDbGFzc05hbWUoeyByb3csIHJvd0luZGV4IH0pIHsNCiAgICAgIGxldCAkaW5kZXggPSByb3dJbmRleDsNCiAgICAgIGZvciAobGV0IHByb3BzIGluIHJvdykgew0KICAgICAgICBsZXQgcmVzID0NCiAgICAgICAgICB0aGlzLmVycm9ySW5kZXhBcnIuaW5kZXhPZigkaW5kZXgpICE9IC0xICYmDQogICAgICAgICAgdGhpcy5lcnJvckluZGV4TXNnT2JqWyRpbmRleF0gJiYNCiAgICAgICAgICB0aGlzLmVycm9ySW5kZXhNc2dPYmpbJGluZGV4XVtwcm9wc107DQogICAgICAgIGlmIChyZXMpIHsNCiAgICAgICAgICByZXR1cm4gInRhYmxlLXJvdy1lcnJvciI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiAiIjsNCiAgICB9LA0KICAgIGltcG9ydFUoKSB7DQogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi6K+35pyA5bCR5a+85YWl5LiA5p2h5pWw5o2u77yBIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnBpbGlhbmdqaXN1YW4oKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHBpbGlhbmdqaXN1YW4oKSB7DQogICAgICBwaWxpYW5namlzdWFuKHsNCiAgICAgICAgbGlzdDogdGhpcy5saXN0LA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDQwMCkgew0KICAgICAgICAgICAgbGV0IG1zZ0FyciA9IHJlcy5kYXRhLm1lc3NhZ2UgfHwgW107DQogICAgICAgICAgICBjb25zb2xlLmxvZyhtc2dBcnIpOw0KICAgICAgICAgICAgdGhpcy5kYW9ydUVycm9yRnVuKG1zZ0Fycik7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlr7zlhaXlpLHotKXvvIHvvIEiKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlr7zlhaXmiJDlip/vvIHvvIEiKTsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBleHBvcnREZWZhdWx0VGVtcGxhdGUoKSB7DQogICAgICBleHBvcnREZWZhdWx0VGVtcGxhdGUoew0KICAgICAgICBtb2R1bGVOYW1lQ246IHRoaXMubmFtZSwNCiAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKCLmlofku7bkuIvovb3miJDlip8iKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzXSk7DQogICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLm5hbWU7DQogICAgICAgICAgaWYgKCJkb3dubG9hZCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKSB7DQogICAgICAgICAgICAvLyDpnZ5JReS4i+i9vQ0KICAgICAgICAgICAgY29uc3QgZWxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7DQogICAgICAgICAgICBlbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgZWxpbmsuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGluayk7DQogICAgICAgICAgICBlbGluay5jbGljaygpOw0KICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChlbGluay5ocmVmKTsgLy8g6YeK5pS+VVJMIOWvueixoQ0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluayk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIElFMTAr5LiL6L29DQogICAgICAgICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlTmFtZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsNCiAgICAgIGxldCBleHRlbnNpb24gPSBmaWxlLm5hbWUuc3Vic3RyaW5nKGZpbGUubmFtZS5sYXN0SW5kZXhPZigiLiIpICsgMSk7DQogICAgICBpZiAoZXh0ZW5zaW9uICE9PSAieGxzeCIpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOaWh+S7tuWPquiDveaYryB4bHN45qC85byPISIsDQogICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgdXBsb2FkU3VjY2VzcyhyZXMpIHsNCiAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuWvvOWFpeaIkOWKnyEiLA0KICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRhbGVydChyZXMubWVzc2FnZSwgIuWvvOWFpeWksei0pSIsIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xlYXJGaWxlcygpOw0KICAgIH0sDQogICAgZXhjZWVkOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmnIDlpJrlj6rog73kuIrkvKAx5LiqeGxz5paH5Lu2Iik7DQogICAgfSwNCiAgICByZW1vdmUoKSB7DQogICAgICB0aGlzLmxpc3QgPSBbXTsNCiAgICB9LA0KfQ0KfQ0K"},{"version":3,"sources":["but.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"but.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\r\n  <div>\r\n       <div class=\"filter-container2\">\r\n      <el-button\r\n        slot=\"trigger\"\r\n        @click=\"dialogVisible = true\"\r\n        icon=\"el-icon-document\"\r\n        type=\"primary\"\r\n        class=\"buts\"\r\n        >导入\r\n      </el-button>\r\n      <el-dialog width=\"900px\" :visible.sync=\"dialogVisible\">\r\n        <el-form ref=\"form\" label-width=\"70px\" v-model=\"formT\">\r\n          <el-upload\r\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n            :on-exceed=\"exceed\"\r\n            limit=\"1\"\r\n            :show-file-list=\"true\"\r\n            :on-remove=\"remove\"\r\n            accept=\".xlsx\"\r\n            :http-request=\"uploadFile\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\" plain>选择文件</el-button>\r\n          </el-upload>\r\n        </el-form>\r\n        <div class=\"preview-excel\">\r\n          <el-table\r\n            class=\"listTable_ele\"\r\n            :row-class-name=\"tableRowClassName\"\r\n            :data=\"list\"\r\n            stripe\r\n            align=\"center\"\r\n            height=\"250\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              :label=\"item.label\"\r\n              align=\"center\"\r\n              :prop=\"item.props\"\r\n              :key=\"'table' + index\"\r\n              :min-width=\"item.width && item.width + 'px'\"\r\n              width=\"min-content\"\r\n              v-for=\"(item, index) in tableThead\"\r\n            >\r\n              <template slot-scope=\"{ row, $index }\">\r\n                <el-tooltip\r\n                  v-if=\"\r\n                    errorIndexArr.indexOf($index) != -1 &&\r\n                    errorIndexMsgObj[$index] &&\r\n                    errorIndexMsgObj[$index][item.props]\r\n                  \"\r\n                  effect=\"dark\"\r\n                  :content=\"\r\n                    errorIndexMsgObj[$index] &&\r\n                    errorIndexMsgObj[$index][item.props]\r\n                  \"\r\n                  placement=\"top\"\r\n                >\r\n                  <div class=\"table-content table-content-error\">\r\n                    {{ (item.props && row[item.props]) || \"该列不可为空！\" }}\r\n                  </div>\r\n                </el-tooltip>\r\n                <div v-else class=\"table-content\">\r\n                  {{ item.props && row[item.props] }}\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button\r\n            class=\"download\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon=\"el-icon-download\"\r\n            @click=\"exportDefaultTemplate()\"\r\n          >\r\n            下载模板\r\n          </el-button>\r\n          <el-button\r\n            type=\"primary\"\r\n            :loading=\"downloadLoading\"\r\n            size=\"small\"\r\n            @click=\"importU()\"\r\n            >导入</el-button\r\n          >\r\n        </span>\r\n      </el-dialog>\r\n      <el-button>\r\n        生成曲线\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport XLSX from \"../../../node_modules/xlsx\"\r\nimport {exportDefaultTemplate,piliangjisuan} from \"../../request/api\"\r\nexport default {\r\ndata() {\r\n    return {\r\n      tableThead: [\r\n        {\r\n          props: \"r7\",\r\n          label: \"R7\",\r\n          width: \"180\",\r\n        },\r\n      \r\n      ],\r\n      formLabelWidth: \"120px\",\r\n      name: \"模板-砼抗压强度推算分析软件.xlsx\",\r\n      dialogVisible: false,\r\n      downloadLoading: false,\r\n      formT: {},\r\n      errorIndexArr: [],\r\n      errorIndexMsgObj: {},\r\n}\r\n},\r\nmethods:{\r\n  async uploadFile(params) {\r\n      console.log(params);\r\n      const _file = params.file;\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = (ev) => {\r\n        try {\r\n          const data = ev.target.result;\r\n          const workbook = XLSX.read(data, {\r\n            type: \"binary\",\r\n          });\r\n          for (let sheet in workbook.Sheets) {\r\n            //循环读取每个文件\r\n            const sheetArray = XLSX.utils.sheet_to_json(workbook.Sheets[sheet]);\r\n            //若当前sheet没有数据，则continue\r\n            if (sheetArray.length == 0) {\r\n              continue;\r\n            }\r\n            console.log(\"读取文件\");\r\n            console.log(sheetArray);\r\n            for (let item in sheetArray) {\r\n              let rowTable = {};\r\n              //这里的rowTable的属性名注意要与上面表格的prop一致\r\n              //sheetArray的属性名与上传的表格的列名一致\r\n              rowTable.r7 = sheetArray[item].R7;\r\n              this.list.push(rowTable);\r\n            }\r\n          }\r\n        } catch (e) {\r\n          this.$message.warning(\"文件类型不正确！\");\r\n        }\r\n      };\r\n      fileReader.readAsBinaryString(_file);\r\n    },\r\n    daoruErrorFun(msgArr) {\r\n      let errorIndexArr = [];\r\n      let errorIndexMsgObj = {};\r\n      msgArr.forEach((v) => {\r\n        let arr = v.split(\"#@\") || [];\r\n        let index = parseFloat(arr[0]);\r\n        errorIndexArr.push(index);\r\n        let value = arr[1] || \"\";\r\n        let arr1 = value.split(\"@\");\r\n        errorIndexMsgObj[index] = {};\r\n        arr1.forEach((v1) => {\r\n          let arr2 = v1.split(\":\");\r\n          errorIndexMsgObj[index][arr2[0]] = arr2[1];\r\n        });\r\n      });\r\n      this.errorIndexArr = errorIndexArr;\r\n      this.errorIndexMsgObj = errorIndexMsgObj;\r\n    },\r\n    tableRowClassName({ row, rowIndex }) {\r\n      let $index = rowIndex;\r\n      for (let props in row) {\r\n        let res =\r\n          this.errorIndexArr.indexOf($index) != -1 &&\r\n          this.errorIndexMsgObj[$index] &&\r\n          this.errorIndexMsgObj[$index][props];\r\n        if (res) {\r\n          return \"table-row-error\";\r\n        }\r\n      }\r\n      return \"\";\r\n    },\r\n    importU() {\r\n      if (this.list.length == 0) {\r\n        this.$message.warning(\"请最少导入一条数据！\");\r\n      } else {\r\n        this.piliangjisuan();\r\n      }\r\n    },\r\n    piliangjisuan() {\r\n      piliangjisuan({\r\n        list: this.list,\r\n      })\r\n        .then((res) => {\r\n          if (res.data.code == 400) {\r\n            let msgArr = res.data.message || [];\r\n            console.log(msgArr);\r\n            this.daoruErrorFun(msgArr);\r\n            this.$message.error(\"导入失败！！\");\r\n          } else {\r\n            this.$message.success(\"导入成功！！\");\r\n            this.dialogVisible = false;\r\n          }\r\n          console.log(res.data);\r\n        })\r\n        .catch(function (err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n    exportDefaultTemplate() {\r\n      exportDefaultTemplate({\r\n        moduleNameCn: this.name,\r\n      })\r\n        .then((res) => {\r\n          // this.$message(\"文件下载成功\");\r\n          console.log(res);\r\n          const blob = new Blob([res]);\r\n          const fileName = this.name;\r\n          if (\"download\" in document.createElement(\"a\")) {\r\n            // 非IE下载\r\n            const elink = document.createElement(\"a\");\r\n            elink.download = fileName;\r\n            elink.style.display = \"none\";\r\n            elink.href = URL.createObjectURL(blob);\r\n            document.body.appendChild(elink);\r\n            elink.click();\r\n            URL.revokeObjectURL(elink.href); // 释放URL 对象\r\n            document.body.removeChild(elink);\r\n          } else {\r\n            // IE10+下载\r\n            navigator.msSaveBlob(blob, fileName);\r\n          }\r\n        })\r\n        .catch(function (err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n    beforeUpload(file) {\r\n      let extension = file.name.substring(file.name.lastIndexOf(\".\") + 1);\r\n      if (extension !== \"xlsx\") {\r\n        this.$message({\r\n          message: \"上传文件只能是 xlsx格式!\",\r\n          type: \"warning\",\r\n        });\r\n        return false;\r\n      }\r\n    },\r\n    uploadSuccess(res) {\r\n      if (res.code == 200) {\r\n        this.$message({\r\n          message: \"导入成功!\",\r\n          type: \"info\",\r\n        });\r\n      } else {\r\n        this.$alert(res.message, \"导入失败\", {\r\n          confirmButtonText: \"确定\",\r\n        });\r\n      }\r\n      this.$refs.upload.clearFiles();\r\n    },\r\n    exceed: function () {\r\n      this.$message.error(\"最多只能上传1个xls文件\");\r\n    },\r\n    remove() {\r\n      this.list = [];\r\n    },\r\n}\r\n}\r\n</script>\r\n\r\n<style>\r\n.filter-container2{\r\nmargin-left:60px;\r\n}\r\n</style>"]}]}